# -*- mode: ruby -*-
# vi: set ft=ruby :

# DNS Server VM Configuration
Vagrant.configure("2") do |config|
  # DNS Server box
  config.vm.box = "open_network_security/dns_server"
  config.vm.box_version = "1.0.0"
  
  # SSH Configuration - let Vagrant handle key-based auth automatically
  config.ssh.insert_key = true
  config.vm.boot_timeout = 600  # Increase timeout to 10 minutes
  
  # Set up Internal Network for isolated VM-to-VM communication (VirtualBox specific)
  # Assign a static IP address for this VM on the internal network
  config.vm.network "private_network", ip: "192.168.10.1", virtualbox__intnet: "labnet"
  
  # VirtualBox provider configuration
  config.vm.provider "virtualbox" do |vb|
    # Run headless (no GUI) for automated setup
    vb.gui = false
    
    # Customize the amount of memory on the VM:
    vb.memory = "4096"
    vb.cpus = 2
    
    # Set VM name
    vb.name = "lab-dns-server"
  end
end 
